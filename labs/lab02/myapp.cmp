clear

cat description.md

git pull
rm -r myapp.1
rm *.o myapp

echo '------- Compiling gpu.cu into gpu.o ------'
nvcc --compiler-options -O3 -arch sm_70 --ptxas-options=-v -c gpu.cu

echo '------ mpicxx -show -------'
mpicxx -show
echo '------- Compiling cpu.cpp into cpu.o; main.cpp into main.o ------'
mpicxx -O3 -c cpu.cpp main.cpp
echo '-------------'
mpicxx -o myapp main.o cpu.o gpu.o
echo '-------------'

mpirun -np 8 ./myapp

echo '----- sleep 5 seconds -------'
sleep 5

echo '-------------------'
echo '-----RESULTS-------'
echo '-------------------'
cat ./myapp.1/output